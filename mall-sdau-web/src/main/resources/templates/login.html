<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="icon" href="/img/milogo.ico" type="/image/x-icon">
    <link rel="stylesheet" type="text/css" href="/font/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="/CSS/login.css"/>
    <link rel="stylesheet" type="text/css" href="/layui/css/layui.css"/>
</head>
<body>
<!-- 小米账号导航栏 -->
<div class="header-bg">
    <div class="header-left"><img src="/img/login/loginleft.jpg"></div>
    <div class="header-right Container ">
        <div class="clearfix one">
            <a href="/index"><img src="/img/login/loginph.png"></a>
            <span class="header-item-tit">体育商城账号</span>
            <ul class="header-list-tit fr">
                <li class="language-title">
                    <div>‎中文(简体)‎<span class="iconfont icon-sanjiaoxing"></span></div>
                    <div class="language-list">
                        <ul>
                            <li>‎‎中文(繁體)‎</li>
                            <li>English</li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
        <div class="login-box">
            <div class="login Container">
                <!--						<div class="Scan">-->
                <!--							<a class="iconfont icon-qrcode-1-copy"></a>-->
                <!--						</div>-->
                <div><!-- 扫码登录左侧一行字 -->
                    <span class="Scan-text">扫码登录</span>
                    <span class="Scan-text-triangle"></span>
                </div>
                <div>
                    <ul class="login-list-tit">
                        <li class="log login-active">登录</li>
                        <li class="resg">注册</li>
                    </ul>
                </div>
                <!-- 登录模块 -->
                <div class="login-sum">
                    <form action="/login" method="post" id="loginForm">
                        <div class="mobile">
                            <label for="login-number" class="focus">账号</label>
                            <input id="login-number" class="login-user" name="username" type="text"/>
                        </div>
                        <div class="password">
                            <label for="login-password" class="focus">密码</label>
                            <input id="login-password" class="login-password" name="password" type="password"/><span
                                id="eye1" class=""></span>
                        </div>

                        <div><a href="javascript:;" class="login-button">登录</a></div>

                    </form>
                </div>
                <!-- 注册模块 -->
                <div class="register-sum">
                    <div class="mobile">
                        <label for="reg-number" class="focus">账号</label>
                        <input id="reg-number" class="login-user" name="username" type="text"/>
                    </div>
                    <div class="password">
                        <label for="reg-password" class="focus">密码</label>
                        <input id="reg-password" class="login-password" name="password" type="password"/><span id="eye2"
                                                                                                               class=""></span>
                    </div>
                    <div class="password">
                        <label for="re-reg-password" class="focus">确认密码</label>
                        <input id="re-reg-password" class="login-password" name="password" type="password"/><span
                            id="eye2" class=""></span>
                    </div>
                    <div class="mobile">
                        <label for="reg-tel" class="focus">手机号</label>
                        <input id="reg-tel" class="login-user" name="tel" type="text"/>
                    </div>
                    <div class="mobile">
                        <label for="reg-name" class="focus">姓名</label>
                        <input id="reg-name" class="login-user" name="name" type="text"/>
                    </div>
                    <div><a id="register-button" class="register-button">注册</a></div>
                    <div><input id="register-chec" class="chec" type="checkbox"><label for="register-chec">已阅读并同意体育商城账号用户协议和隐私政策</label>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div>
<script src="/JS/login.js"></script>
<script src="/layui/layui.js"></script>
<script type="text/javascript">
    layui.use(['layer'], function () {
        var layer = layui.layer;
        var errMsg = '[[${errMsg}]]';
        if (errMsg) {
            layer.msg(errMsg);
        }

        //密码框
        var EY = document.querySelector('#eye1');
        EY.className = 'iconfont icon-eye';
        var sta = true;
        EY.onclick = function () {
            if (sta) {
                EY.className = 'iconfont icon-eye1';
                logipas.type = 'text'
            } else {
                EY.className = 'iconfont icon-eye';
                logipas.type = 'password'
            }
            sta = !sta;
        }

        var Logi = document.querySelector('.log');
        var Resgi = document.querySelector('.resg');
        var LOdisp = document.querySelector('.login-sum');
        var REdisp = document.querySelector('.register-sum');
        Logi.onclick = function () {
            LOdisp.style.display = 'block';
            REdisp.style.display = 'none';
            Logi.className = 'log login-active'
            Resgi.className = 'resg'
        }

        Resgi.onclick = function () {
            LOdisp.style.display = 'none';
            REdisp.style.display = 'block';
            Logi.className = 'log'
            Resgi.className = 'resg login-active'
        }

        //扫码登陆
        // var sca = document.querySelector('.Scan');
        // var im  = document.querySelector('.Scan a');
        // var statu = true;

        // sca.onclick=function(){
        // 	var one = document.querySelector('.resg').classList.contains('login-active');
        // 	if(statu == true){
        // 		im.className = 'iconfont icon-diannao';
        // 		document.querySelector('.scan-sum').style.display = 'block';
        // 		document.querySelector('.login-list-tit').style.display= 'none';
        // 		document.querySelector('.Scan-text').innerHTML = '密码登录';
        // 		document.querySelector('.register-sum').style.display= 'none';
        // 		document.querySelector('.login-sum').style.display= 'none';
        // 	}else{
        // 		im.className = 'iconfont icon-qrcode-1-copy';
        // 		document.querySelector('.scan-sum').style.display = 'none';
        // 		document.querySelector('.login-list-tit').style.display= 'block';
        // 		document.querySelector('.Scan-text').innerHTML = '扫码登录';
        // 		console.log(one)
        //
        // 		if(one == true){
        // 			console.log('1');
        // 			document.querySelector('.register-sum').style.display= 'block';
        // 			document.querySelector('.login-sum').style.display= 'none';
        // 		}else{
        // 			console.log('2')
        // 			document.querySelector('.register-sum').style.display= 'none';
        // 			document.querySelector('.login-sum').style.display= 'block';
        // 		}
        // 	}
        // 	statu = !statu;
        // }

        //扫码登陆获取焦点时，左侧显示一行字
        // document.querySelector('.Scan').onmouseenter=function(){
        // 	document.querySelector('.Scan-text').style.display = 'block';
        // 	document.querySelector('.Scan-text-triangle').style.display = 'block';
        //
        // }
        // document.querySelector('.Scan').onmouseleave=function(){
        // 	document.querySelector('.Scan-text').style.display = 'none';
        // 	document.querySelector('.Scan-text-triangle').style.display = 'none';
        //
        // }


        //登录按钮   判断条件，符合则进入首页
        var logibtn = document.querySelector('.login-button');
        var logiuse = document.querySelector('.login-user');
        var logipas = document.querySelector('.login-password');
        logibtn.onclick = function () {
            if (logiuse.value == 0 || logipas.value == 0) {
                alert('请输入账号或密码');
                return;
            } else {
                document.querySelector("#loginForm").submit();
            }
        }

        //注册按钮

    });
    var layer = layui.layer;
    var $ = layui.jquery;

    $(".register-button").on("click", function () {
        // var phonenu = resinum.value;
        // var messnu = resimes.value;
        // var resibtn = document.querySelector('.register-button');
        var regnum = document.querySelector('#reg-number');
        var regpsd = document.querySelector('#reg-password');
        var reregpsd = document.querySelector('#re-reg-password');
        var retel = document.querySelector('#reg-tel');
        var rename= document.querySelector('#reg-name');
        // var resinum = document.querySelector('.register-number');
        // var resimes = document.querySelector('.register-message');

        var che = document.querySelector('.chec');
        var num = regnum.value;
        var psd = regpsd.value;
        var repsd = reregpsd.value;
        var tel = retel.value;
        var name = rename.value;
        // if(phonenu==0 || messnu==0){
        // 	alert('请输入手机号或验证码');
        // 	return;
        // }if(phonenu.length != 11){
        // 	alert('请输入正确的手机号');
        // 	return;
        // }if(messnu.length != 6){
        // 	alert('请输入正确的六位验证码');
        // 	return;
        // }
        if (num == '') {
            alert('请输入账号');
            return;
        }
        if (psd == '') {
            alert('请输入密码');
            return;
        }
        if (repsd == '') {
            alert('请输入确认密码');
            return;
        }
        if (psd != repsd) {
            alert('两次输入的密码不一致');
            return;
        }
        if(tel.length != 11) {
            alert('请输入正确的手机号');
            return;
        }
        if(name =='') {
            alert('请输入姓名');
            return;
        }
        if (che.checked == false) {
            alert('请先勾选用户协议');
            return;
        }
        let data = {
            username: num,
            password: psd,
            tel: parseInt(tel),
            name: name,
        }
        $.post('/register', data, function (result) {
            console.log(result)
            if(result.code!=0){
                alert(result.msg)
            }else if(result.code==0){
                alert('注册成功');
                var Logi = document.querySelector('.log');
                var Resgi = document.querySelector('.resg');
                var LOdisp = document.querySelector('.login-sum');
                var REdisp = document.querySelector('.register-sum');
                LOdisp.style.display = 'block';
                REdisp.style.display = 'none';
                Logi.className = 'log login-active'
                Resgi.className = 'resg'
            }
        })

        // document.querySelector('.mobile label').classList.add('focus');
        // document.querySelector('#login-number').value=document.querySelector('#register-number').value;
        // document.querySelector('.register-sum').style.display = 'none';
        // document.querySelector('.login-sum').style.display = 'block';
        // document.querySelector('.resg').classList.remove('login-active');
        // document.querySelector('.log').classList.add('login-active');

    })
    //发送验证码按钮事件
    $("#sendBtn").on("click", function () {
        //获取手机号的值
        $("#register-number").val();
        if (!tel) {
            layer.msg("请输入手机号");
            return false;
        }
        $.post("ndCode", {tel: tel}, function () {
            //禁用按钮60s
        });
    });
    var errMsg = '[[${errMsg}]]';
    if (errMsg) {
        layer.msg(errMsg);
    }


</script>
</body>
</html>
